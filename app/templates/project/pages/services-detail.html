<div class="page-header" layout-padding>
	<md-toolbar>
		<div class="md-toolbar-tools">
			<div layout="column">
				<h1 class="name-project">
					<div sub-nav-menu-button current-page="7"></div>
					{{projectData.title}}
					<span class="small-text small-text--grey">Due in 20 days</span>
				</h1>
				<span ng-if="isPreview" class="project-manager">Submitted: {{projectData.projectManager}}</span>
			</div>      
		</div>
	</md-toolbar>
</div>
<div class="project-details-services" layout="column">
	<a class="link margin-bottom8" ng-href="{{'project.php#/' + projectData.id + '/services'}}">
		Return to Services
	</a>
	<div layout="row" layout-align="space-between start">
		<div layout="column" class="header">
			<h2><a ng-href="{{(service.from == 'marketplace')?'service-marketplace.php#/' + service.id : ''}}">{{service.title}}</a> <span>By {{service.owner}}</span></h2>
			<a ng-href="{{'project.php#/' + projectData.id + '/services/' + service.id + '/detail/run-history'}}" class="link margin-top8">
				Run History
			</a>
			<a ng-href="{{'project.php#/' + projectData.id + '/services/' + service.id + '/publish'}}" ng-if="service.from == 'project'" class="link margin-top8">
				Publish Service
			</a>
			<ui-widget-stars-static size="15" value="{{service.average_rating}}" text="({{service.average_rating}}) {{service.number_of_comments}} reviews"></ui-widget-stars-static>
		</div>
		<div class="buttons" layout layout-align="center center">
			<md-button class="md-raised" ui-sref="project.run-services({ServiceId : service.id})">
				Run
			</md-button>
			<md-button class="md-raised" ng-click="follow()">
				{{(followFlag) ? 'Unfollow' : 'Follow'}}
			</md-button>
			<md-button aria-label="reply" href="" class="md-icon-button reply header-icon">
				<ng-md-icon icon="reply" style="fill: grey;" size="25"></ng-md-icon>
			</md-button>
			<md-button aria-label="create" ng-href="{{'project.php#/' + projectData.id + '/services/' + service.id + '/edit'}}" class="md-icon-button header-icon">
				<ng-md-icon icon="create" style="fill: grey;" size="25"></ng-md-icon>
			</md-button>
			<md-button aria-label="delete" ng-click="delete()" class="md-icon-button header-icon">
				<ng-md-icon icon="delete" style="fill: grey;" size="25"></ng-md-icon>
			</md-button>
		</div>
	</div>
	<div class="description">
		{{service.description}}
	</div>
	<md-tabs md-selected="$parent.selectedTab" md-dynamic-height md-border-bottom>
		<md-tab label="STATISTICS">
			<ui-widget-tabs-statistic data="service.services_statistic[0]" filter="getHistory"></ui-widget-tabs-statistic>
		</md-tab>
		
		<md-tab label="HISTORY">
			<ui-widget-tabs-history data="history"></ui-widget-tabs-history>
		</md-tab>

		<md-tab label="TAGS">
			<md-content class="md-padding">
				<div layout="row" class="tabs-content" layout-wrap>
					<md-chips ng-repeat="tag in service.service_tags track by $index">
						<md-chip ng-click="search(tag.name)">
							<a ng-href="/marketplace.php#/search/services?text={{tag.name}}">{{tag.name}}</a>
						</md-chip>
					</md-chips>
				</div>
			</md-content>
		</md-tab>

		<md-tab label="DOCUMENTS">
			<md-content class="md-padding">
                <ui-widget-documents-folder documents-type="'service'" type-id="service.id"></ui-widget-documents-folder>
			</md-content>
		</md-tab>

		<md-tab ng-if="service.from == 'marketplace'" label="Reviews">
			<div layout="row" layout-align="start center">
				<h4>{{service.number_of_comments}} reviews </h4>
				<ui-widget-stars-static size="15" value="{{service.average_rating}}" text="({{service.average_rating}})"></ui-widget-stars-static>
			</div>
			<div ng-repeat="review in service.service_reviews">
				<ui-widget-review review="review" userlogin="'UserLogin'" typereview="'reply_reviews'"></ui-widget-review>
        <md-divider></md-divider>
      </div>
		</md-tab>
	</md-tabs>
</div>