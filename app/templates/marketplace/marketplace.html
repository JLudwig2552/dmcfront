<div class="container marketplace-box" layout="row" >
  <!-- <div class="content-column" layout="column" flex='20'>
    <dmc-tree-menu tree-source="treeMenuModel"></dmc-tree-menu>
  </div> -->
  <!-- Left Content Column -->
  <div class="marketplace" layout="column" flex>
    left
{{alex}}

{{marketplace.arr.length}}

<div class="products-card">

    <md-progress-linear md-mode="indeterminate" ng-show="cardLoading"></md-progress-linear>

    <div class="content-panel-body">
        <md-content>
          <div ng-repeat="serviceGroup in marketplace.arr">
            <div class="list-items product-container" layout="row" layout-wrap>
              <div layout-padding layout-margin flex="76">
                <h2 style="border-bottom: 1px solid rgba(0, 0, 0, 0.12);">{{serviceGroup.serviceType}}</h2>
              </div>
            </div>
            <div class="list-items product-container" layout="row" layout-wrap>
                <!-- <div class="one-item"
                     flex-sm="100"
                     flex-md="50"
                     flex-lg="33"
                     flex-gt-lg="25"
                     dir-paginate="item in itemsArray | itemsPerPage: pageSize track by $index"> -->
                    <!-- <dmc-product-card card-style="'small'" ng-show="item.id"
                                      type-product="item.type"
                                      add-featured="addFeatured"
                                      remove-featured="removeFeatured"
                                      hide-buttons="hideButtons"
                                      card-source="item">
                    </dmc-product-card> -->
                <!-- </div> -->
<!-- TODO this needs it -->
                  <div ng-repeat="item in marketplace.arr">
                    <div class="product-card" layout="column">
                        <input class="product-card-featureId" type="hidden" ng-model="cardSource.featureId" value="{{cardSource.featureId}}" ng-if="cardSource.featureId">
                        <input class="product-card-position" type="hidden" ng-model="cardSource.position" value="{{cardSource.position}}" ng-if="cardSource.position">
                        <!-- <md-toolbar>
                            <div class="md-toolbar-tools" layout-align="end center"> -->
                                <!-- <md-button md-no-ink ng-show="!hideButtons || hideButtons.indexOf('favorite') == -1"
                                           ng-click="addToFavorite()"
                                           aria-label="Favorite"
                                           class="md-icon-button" flex>
                                    <ng-md-icon icon="{{ cardSource.favorite ? 'favorite' : 'favorite_outline'}}"
                                                ng-class="!cardSource.favorite ? 'not-favorite' : 'is-favorite'"
                                                size="25"></ng-md-icon>
                                </md-button> -->

                          <!-- <md-button md-no-ink
                                     ng-show="!hideButtons || hideButtons.indexOf('share') == -1"
                                     ng-click="share()"
                                     aria-label="Reply"
                                     class="md-icon-button" flex>
                            <ng-md-icon icon="share" style="fill: grey;" size="25"></ng-md-icon>
                          </md-button> -->
                          <!-- <md-button md-no-ink
                                     ng-click="show()"
                                     aria-label="Open"
                                     class="md-icon-button" flex="33">
                            <ng-md-icon icon="info_outline" style="fill: grey;" size="25"></ng-md-icon>
                          </md-button> -->
                            <!-- </div> -->
                        <!-- </md-toolbar> -->

                          <div class="product-card__title">
                            <a ng-href="{{'/service-marketplace.php#/'+cardSource.id}}" ng-click="previousPage.save($event)">{{cardSource.title}}</a>
                          </div>

                          <div class="product-card-container">
                              <div class="product-card__description product-card-container">
                                  <div class="product-text">{{cardSource.description | limitTo:descriptionLenLimit}}
                                    <span ng-if="descriptionTooLong()" ng-click="switchDescriptionLenLimit()"><a style="color: #65AF3F;" href>...{{descriptionLenLimitPrompt}}<a></span>
                                  </div>
                                  <ui-widget-stars-static class="review-stars" size="10" value={{cardSource.ratingAverage}} text=({{cardSource.ratingCount}})></ui-widget-stars-static>
                              </div>

                              <div class="product-card__image_small">
                                <img ng-if="cardSource.images[0].documentUrl" ng-src="{{cardSource.images[0].documentUrl}}" alt="{{cardSource.title}}">
                                <img ng-if="!cardSource.images[0].documentUrl" ng-src="images/DMCGear.png" alt="{{cardSource.title}}">
                              </div>
                          </div>


                        <!-- <div class="product-card__image_small">
                            <img ng-src="{{cardSource.images[0].documentUrl}}" alt="{{cardSource.title}}">
                        </div> -->
                        <!-- <div class="product-card__header" layout="column"
                             ng-class="cardStyle == 'small' ? 'title-without-spaces' : ''">
                            <a ng-href="{{'/service-marketplace.php#/'+cardSource.id}}" ng-click="previousPage.save($event)"><h3>{{cardSource.title}}</h3></a>
                            <a ng-href="{{'/company.php#/'+(cardSource.companyId ? cardSource.companyId: 1)+'/storefront?product=services'}}"><span class="user-name">{{cardSource.ownerName}}</span></a>
                        </div> -->

                        <!-- <div class="product-card__owner" layout="row">
                            <div class="product-card__owner__column">
                              {{cardSource.owner}}
                            </div>
                        </div> -->

                        <!-- <div class="product-card__content" layout="row"  ng-if="cardStyle != 'included'">
                            <div class="product-card__content__column" flex="28" layout="column">
                                <div class="star-rating">
                                    <div class="star-rating__buttons">
                                        <md-button aria-label="Star" md-no-ink class="md-icon-button">
                                            <ng-md-icon aria-label="" icon="star" style="fill: #f28e1e;" size="14"></ng-md-icon>
                                        </md-button>
                                        <md-button aria-label="Star" md-no-ink class="md-icon-button">
                                            <ng-md-icon aria-label="" icon="star" style="fill: #f28e1e;" size="14"></ng-md-icon>
                                        </md-button>
                                        <md-button aria-label="Star" md-no-ink class="md-icon-button">
                                            <ng-md-icon aria-label="" icon="star" style="fill: #c7c7c7;" size="14"></ng-md-icon>
                                        </md-button>
                                        <md-button aria-label="Star" md-no-ink class="md-icon-button">
                                            <ng-md-icon aria-label="" icon="star" style="fill: #c7c7c7;" size="14"></ng-md-icon>
                                        </md-button>
                                        <md-button aria-label="Star" md-no-ink class="md-icon-button">
                                            <ng-md-icon aria-label="" icon="star" style="fill: #c7c7c7;" size="14"></ng-md-icon>
                                        </md-button>
                                    </div>
                                    <div class="star-rating__value">
                                        <span class="small-text">(3.4)</span>
                                    </div>
                                </div>
                                <div class="product-card__details">
                                    <p class="description">{{cardSource.description}}</p>

                                    <p>Added <strong>{{cardSource.specificationsData.usageStats.added}} times</strong> by <strong>{{cardSource.specificationsData.usageStats.members}}
                                        members</strong></p>

                                    <p><strong>{{cardSource.specificationsData.runStats.success}}/{{cardSource.specificationsData.runStats.success+cardSource.specificationsData.runStats.fail}}</strong>
                                        successful runs</p>

                                    <p class="release">Release <strong>{{cardSource.releaseDate|timeago}}</strong> ({{cardSource.releaseDate}})</p>
                                </div>
                            </div>
                        </div> -->
                        <!-- added in empty footer for aesthetics, should be removed if additional buttons re-introduced -->
                        <!-- <div class="product-card__footer" layout="row"> -->


                        <!-- <div class="product-card__footer" layout="row" ng-if="removeFeatured || addFeatured">
                            <div layout="row" class="remove-from-featured" flex layout-align="center center" ng-show="cardSource.inFeatured && removeFeatured">
                                <md-button aria-label="Remove from Featured" layout="column" flex ng-click="removeFromFeatured($event)">
                                    Remove from Featured
                                </md-button>
                            </div>
                            <div layout="row" class="add-to-featured" flex layout-align="center center" ng-show="!cardSource.inFeatured && addFeatured">
                                <md-button aria-label="Add to Featured" layout="column" flex ng-click="addToFeatured()">
                                    Add to Featured
                                </md-button>
                            </div>
                        </div> -->
                        <!-- <div class="product-card__footer" layout="row" ng-if="cardStyle != 'included' && !removeFeatured && !addFeatured"> -->
                        <div class="product-card-container product-card__footer" ng-if="cardStyle != 'included' && !removeFeatured && !addFeatured">
                            <div class="adding-to-project" ng-show="addingToProject">
                                <div layout="row" layout-align="center center" class="inner-add-to-project" flex>
                                    <md-button aria-label="Cancel" layout="column" class="close" ng-click="cancelAddToProject()">
                                        <ng-md-icon icon="close" size="17"></ng-md-icon>
                                    </md-button>
                                    <div layout="column" class="select-block" flex>
                                        <md-select placeholder="Select Project" ng-model="projectModel" md-on-open="loadProjects()">
                                            <md-option ng-repeat="p in projects" ng-value="{{p.id}}">{{p.title}}</md-option>
                                        </md-select>
                                    </div>
                                    <md-button aria-label="Add"
                                               layout="column"
                                               ng-disabled="!projectModel"
                                               class="md-raised add"
                                               ng-click="saveToProject(projectModel)">Add
                                    </md-button>
                                </div>
                            </div>

                            <md-button aria-label="Back to Add"
                                       class="back-to-add"
                                       ng-click="backToAdd()"
                                       ng-show="addingToProject == false && cardSource.added">
                                <ng-md-icon icon="close" size="17"></ng-md-icon>
                            </md-button>

                            <md-button aria-label="Project Link"
                                       flex
                                       class="page-href"
                                       ng-style="compareStyle"
                                       ng-show="addingToProject == false && cardSource.added"
                                       href="{{cardSource.lastProject.href}}">
                            <span flex>
                                Added to {{cardSource.lastProject.title}}
                            </span>
                                <ng-md-icon icon="keyboard_arrow_right" style="fill: #fff" size="32"></ng-md-icon>
                            </md-button>

                            <md-button aria-label="Add to Project"
                                       flex
                                       ng-style="compareStyle"
                                       class="white-button"
                                       ng-click="addToProject()"
                                       ng-hide="addingToProject || cardSource.added">
                                Add to Project
                            </md-button>

                            <!-- buttons for compare -->
                            <md-button aria-label="Add to Compare"
                                       flex
                                       class="white-button"
                                       ng-click="addToCompare()"
                                       ng-disabled="(cardSource.type == 'service' && $root.comparedServices.components.length > 0) || (cardSource.type == 'component' && $root.comparedServices.services.length > 0)"
                                       ng-style="compareStyle"
                                       ng-show="!cardSource.added && addingToProject == false && (typeProduct == 'service' && $root.comparedServicesIds.services.indexOf(cardSource.id) == -1) || (typeProduct == 'component' && $root.comparedServicesIds.components.indexOf(cardSource.id) == -1)">
                                Add to Compare
                            </md-button>
                            <md-button aria-label="Compare" flex ng-click="removeFromCompare()" class="remove"
                                       ng-style="compareStyle"
                                       ng-hide="cardSource.added || addingToProject == true || !$root.comparedServicesIds || (typeProduct == 'service' && $root.comparedServicesIds.services.indexOf(cardSource.id) == -1) || (typeProduct == 'component' && $root.comparedServicesIds.components.indexOf(cardSource.id) == -1)">
                                <ng-md-icon icon="close" size="17"></ng-md-icon>
                                Compare
                            </md-button>

                        </div>
                    </div>

                  </div>
                </div>
            </div>
        </md-content>
    </div>




    <div class="content-panel-footer storefront-results-footer">
        <!--<div class="total-items">-->
            <!--{{(currentPage-1)*pageSize+1}}-{{currentPage*pageSize > totalSize ? totalSize : currentPage*pageSize}} of {{totalSize}}-->
        <!--</div>-->
        <!-- <div class="text-center">
            <dir-pagination-controls on-page-change="pageChangeHandler(currentPage)"></dir-pagination-controls>
        </div> -->
    </div>
</div>


    <!-- <md-content class="marketplace-search" layout="row" layout-align="center center">

      <form ng-submit="submit(searchModel)" class="dmc-search global-search-form" flex="60">
          <div layout="column">
              <div layout="row">
                  <div layout="column" flex>
                      <md-input-container md-no-float>
                          <md-icon>
                              <ng-md-icon icon="search"></ng-md-icon>
                          </md-icon>
                          <input type="text" placeholder="Search Marketplace" ng-model="searchModel">
                      </md-input-container>
                  </div>
                  <div layout="column">
                      <md-input-container>
                          <md-button type="submit" class="search-button">Search</md-button>
                      </md-input-container>
                  </div>
              </div>
          </div>
      </form>

      <span flex></span>

      <div class="marketplace-search-button" layout="row" layout-align="center start">
        <md-button class="link-button favorites-link" md-no-ink href="/favorites.php">
          <ng-md-icon icon="favorite" size="14"></ng-md-icon>
          Favorites ({{favoritesCount}})
        </md-button>
        <md-button class="md-raised dmc-button"
                   ng-disabled="!$root.comparedServices || !$root.comparedServices.services || $root.comparedServices.services.length == 0"
                   compare-button>
          Compare ({{$root.comparedServices && $root.comparedServices.services ? $root.comparedServices.services.length : 0}})
        </md-button>
      </div>
    </md-content> -->

    <md-tabs md-dynamic-height md-border-bottom ng-if="!isSearch" class="marketplace-carousel-tabs">
      <!-- <md-tab label="Popular">
        <md-content class="carousel-padding">
          <div dmc-carousel
              name-carousel="'carouselPopular'"
              max-items="24"
              show-items="3"
              carousel-source="carouselData.popular.arr"
              run-carousel="true"
              timeout="5">
          </div>
        </md-content>
      </md-tab> -->

      <!-- <md-tab label="DMC Marketplace">
        <md-content class="carousel-padding">
          <div dmc-carousel
              name-carousel="'carouselNew'"
              max-items="24"
              show-items="3"
              carousel-source="carouselData.new.arr"
              run-carousel="true"
              timeout="5">
          </div>
        </md-content>
      </md-tab>
    </md-tabs> -->

    <!-- Favorit items -->
    <!-- <div class="marketplace-storefronts">
      <dmc-products-card
          title-card="'ITEMS FROM FAVORITE STOREFRONTS'"
          search-card="isSearch"
          card-source="marketplaceItems"
          card-loading="downloadData"
          page-size="productCardPageSize"
          update-page-size="updatePageSize"
          current-page="productCardCurrentPage"
          total-size="marketplaceItems.count"
          class="content-panel-marketplace"
          hide-buttons="['compare']"
          view-all-link="'/marketplace.php#/search?product=services'"
          layout-margin>
      </dmc-products-card>
    </div> -->
  </div>

  right
</div>
